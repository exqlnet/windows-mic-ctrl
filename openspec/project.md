# Windows Mic Ctrl 项目规范

## 项目目标

构建一个面向 Windows 10/11 的麦克风按键控制桌面应用，解决 QQ 语音缺少原生按键通话能力的问题。

## 目标边界

- 平台：Windows 10/11 x64
- 技术：Tauri v2 + Rust + React + TypeScript
- 音频路线：物理麦克风采集 -> 应用门控 -> 虚拟声卡输入端
- 首版不包含：AEC、降噪、多路混音、云端服务

## 架构分层

1. 前端展示层：状态展示、配置管理、引导页
2. 应用服务层：命令接口、状态机、托盘/快捷键编排
3. 音频引擎层：实时音频流桥接、门控、监控
4. 系统集成层：全局快捷键、自启动、托盘

## 工程规范

- 代码注释默认中文
- 错误处理：显式失败，带上下文错误信息
- 日志：结构化日志，包含动作、结果、耗时/错误
- 安全：默认本地存储，不上传用户音频数据

## 测试与验证

- Rust：`cargo test`
- 前端：`npm run typecheck`
- 构建：`cargo check`、`npm run build`

## 发布与回滚

- 发布采用 Tauri bundle
- 回滚通过安装上一版本构建产物实现
- 配置兼容策略：新增字段必须具备默认值
